(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{193:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return p}));var r=n(1),a=n(6),i=(n(0),n(216)),o={id:"getting-started",title:"Getting Started",sidebar_label:"Getting Started"},s={id:"yoshi-server/getting-started",title:"Getting Started",description:"> This feature in under development. It will be available soon.",source:"@site/docs/yoshi-server/getting-started.md",permalink:"/yoshi/docs/next/yoshi-server/getting-started",editUrl:"https://github.com/wix/yoshi/edit/master/website/docs/yoshi-server/getting-started.md",version:"next",lastUpdatedBy:"Yaniv Efraim",lastUpdatedAt:1588578613,sidebar_label:"Getting Started"},c=[{value:"Setup",id:"setup",children:[]},{value:"Manual Setup",id:"manual-setup",children:[]},{value:"Adding your first Yoshi Server function",id:"adding-your-first-yoshi-server-function",children:[]}],l={rightToc:c};function p(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"This feature in under development. It will be available soon.")),Object(i.b)("p",null,"Welcome to Yoshi Server documentation!"),Object(i.b)("p",null,"Yoshi Server makes it easier to consume data from the server by adding an abstraction over client server communication, using conventions."),Object(i.b)("h2",{id:"setup"},"Setup"),Object(i.b)("p",null,"We recommend creating a new Yoshi Server app using the ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"https://wix.github.io/yoshi/docs/getting-started/create-app"}),Object(i.b)("inlineCode",{parentName:"a"},"create-yoshi-app")),". It is available for both Fullstack and Business Manager apps."),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-bash"}),"npx create-yoshi-app my-app-name\n")),Object(i.b)("h2",{id:"manual-setup"},"Manual Setup"),Object(i.b)("h5",{id:"prerequisits"},"Prerequisits"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"A fullstack app (both server and client are together, using the same ",Object(i.b)("inlineCode",{parentName:"li"},"package.json")," file)."),Object(i.b)("li",{parentName:"ul"},"We currently support only projects using the ",Object(i.b)("inlineCode",{parentName:"li"},"app-flow"),' ("projectType": "app" in your Yoshi configuration). If you do not use it, please migrate first (see ',Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"https://wix.github.io/yoshi/docs/guides/app-flow"}),"https://wix.github.io/yoshi/docs/guides/app-flow")," for more details)")),Object(i.b)("p",null,"Install ",Object(i.b)("inlineCode",{parentName:"p"},"yoshi-server")," and ",Object(i.b)("inlineCode",{parentName:"p"},"yoshi-server-client"),":"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{}),"npm install yoshi-server yoshi-server-client\n")),Object(i.b)("p",null,"Update ",Object(i.b)("inlineCode",{parentName:"p"},"yoshi.config.js")," of ",Object(i.b)("inlineCode",{parentName:"p"},"package.json"),"'s ",Object(i.b)("inlineCode",{parentName:"p"},"yoshi")," section:"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-diff"}),'"yoshi": {\n  "projectType": "app",\n+  "yoshiServer": true,\n...\n}\n')),Object(i.b)("p",null,"Set your server to handle requests"),Object(i.b)("p",null,"Yoshi Server will handle server requests by convention (see ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"consuming-data-from-the-server#server-functions"}),"server functions")," and ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"exposing-route"}),"route functions"),"). All we have to do is bootstrap it from our ",Object(i.b)("inlineCode",{parentName:"p"},"index.js")," file:"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),'require("yoshi-server/bootstrap");\n')),Object(i.b)("p",null,"Now you are ready to add your first Yoshi Server function."),Object(i.b)("h2",{id:"adding-your-first-yoshi-server-function"},"Adding your first Yoshi Server function"),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"Files with ",Object(i.b)("inlineCode",{parentName:"p"},".api.js")," or ",Object(i.b)("inlineCode",{parentName:"p"},".api.ts")," extention with named export functions will be treated as ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"consuming-data-from-the-server#server-functions"}),"server functions"),".")),Object(i.b)("p",null,"Add a ",Object(i.b)("inlineCode",{parentName:"p"},"greet.api.ts")," file to your project (if your project is in Javascript, use ",Object(i.b)("inlineCode",{parentName:"p"},".js")," for all examples):"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),'// greet.api.ts\nimport { method } from "yoshi-server";\n\nexport const greeting = method(function(name: string) {\n  return {\n    greet: `hello ${name}!`,\n    name\n  };\n});\n')),Object(i.b)("p",null,"Now that we have our first server function (",Object(i.b)("inlineCode",{parentName:"p"},"greeting"),"), let's consume the data from our client code."),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),'import HttpClient from "yoshi-server-client";\nimport { greeting } from "./greet.api";\n\n// For Business Manager modules, we map all api requests to \'/_api/projectName\'\nconst client = new HttpClient({ baseUrl: "/_api/projectName" });\n\nclient.request({ method: greeting, args: ["John"] }).then(data => {\n  console.log(data.greet);\n});\n')),Object(i.b)("p",null,"That's it!"),Object(i.b)("p",null,"Running ",Object(i.b)("inlineCode",{parentName:"p"},"npx yoshi start")," shows ",Object(i.b)("inlineCode",{parentName:"p"},"hello John")," in the console."),Object(i.b)("h4",{id:"what-just-happened-here"},"What just happened here?"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"yoshi-server-client")," is triggering xhr calls behind the scenes."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"yoshi-server")," has one endpoint, ",Object(i.b)("inlineCode",{parentName:"li"},"_api_")," (open devtools to see it). All requests are made as ",Object(i.b)("inlineCode",{parentName:"li"},"post")," requests, with data about the function that we want to call and the arguments."),Object(i.b)("li",{parentName:"ul"},"If you are using Typescript, server arguments and response are typed!"),Object(i.b)("li",{parentName:"ul"},"For Business Manager modules, all API requests to ",Object(i.b)("inlineCode",{parentName:"li"},"/_api/projectName")," are mapped to ",Object(i.b)("inlineCode",{parentName:"li"},"/_api_")," (Yoshi Server)")))}p.isMDXComponent=!0},216:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m}));var r=n(0),a=n.n(r);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=a.a.createContext({}),p=function(e){var t=a.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s({},t,{},e)),n},b=function(e){var t=p(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),b=p(n),d=r,m=b["".concat(o,".").concat(d)]||b[d]||u[d]||i;return n?a.a.createElement(m,s({ref:t},l,{components:n})):a.a.createElement(m,s({ref:t},l))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var l=2;l<i;l++)o[l]=n[l];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);