(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{173:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return b}));var a=n(1),r=n(6),i=(n(0),n(228)),o={title:"Yoshi 3.0",author:"Ran Yitzhaki, Ronen Amiel, Yair Haimovitch"},l={permalink:"/yoshi/blog/2018/06/02/yoshi-3",source:"@site/blog/2018-06-3-yoshi-3.md",description:"# Release notes",date:"2018-06-02T21:00:00.000Z",tags:[],title:"Yoshi 3.0",truncated:!1,prevItem:{title:"Yoshi 4 - Slick and polished",permalink:"/yoshi/blog/2019/03/12/yoshi-4"},nextItem:{title:"Yoshi 2.0",permalink:"/yoshi/blog/2018/03/15/yoshi-2"}},s=[{value:"\ud83e\uddde\u200d Zero configuration",id:"\ud83e\uddde-zero-configuration",children:[]},{value:"\ud83d\udc40 Lint",id:"-lint",children:[{value:"Choose the proper linting configuration for your project",id:"choose-the-proper-linting-configuration-for-your-project",children:[]}]},{value:"\ud83e\udd1e Shorter NPM Installs",id:"\ud83e\udd1e-shorter-npm-installs",children:[{value:"Protractor",id:"protractor",children:[]},{value:"Karma",id:"karma",children:[]}]},{value:"\ud83c\udf32 Tree shaking",id:"-tree-shaking",children:[]},{value:"\ud83d\udcdf Code splitting",id:"-code-splitting",children:[]},{value:"\ud83c\udf9b Easier debugging, Faster development, Production optimizations",id:"-easier-debugging-faster-development-production-optimizations",children:[]},{value:"\ud83e\udd39 Jest 23",id:"\ud83e\udd39-jest-23",children:[]},{value:"\ud83d\udd0d URL resolve loader",id:"-url-resolve-loader",children:[]},{value:"\ud83d\udc8e Jasmine 3",id:"-jasmine-3",children:[]}],c={rightToc:s};function b(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h1",{id:"release-notes"},"Release notes"),Object(i.b)("p",null,"We're proud to announce our third major release, focusing on zero config, improved npm install time, tree shaking, code splitting and bumping the versions of Jest, Jasmine and more."),Object(i.b)("h2",{id:"\ud83e\uddde-zero-configuration"},"\ud83e\uddde\u200d Zero configuration"),Object(i.b)("p",null,"Today, Yoshi takes care of ",Object(i.b)("strong",{parentName:"p"},"some")," configurations, for example, ",Object(i.b)("inlineCode",{parentName:"p"},"webpack")," and ",Object(i.b)("inlineCode",{parentName:"p"},"mocha"),", but leaves the users to configure ",Object(i.b)("inlineCode",{parentName:"p"},"lint")," and ",Object(i.b)("inlineCode",{parentName:"p"},"babel")," without supplying good defaults."),Object(i.b)("p",null,"In this release, we provide default configurations which are handcrafted and well maintained by the Yoshi team. While supplying these configurations as part of Yoshi, we'll be able to make sure they'll justWork\u2122."),Object(i.b)("h2",{id:"-lint"},"\ud83d\udc40 Lint"),Object(i.b)("p",null,"Our lint configurations aim to help to find errors, improve readability, enforce best practices and maintain consistency in the codebase."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/prettier/prettier"}),"Prettier")," - All of our lint configurations comes with built-in prettier support"),Object(i.b)("li",{parentName:"ul"},"Autofixable - We try to use mostly autofixable rules, so lint won't be much of a hassle"),Object(i.b)("li",{parentName:"ul"},"Strict & balanced - Add non-fixable rules only if they will help to find bugs")),Object(i.b)("h3",{id:"choose-the-proper-linting-configuration-for-your-project"},"Choose the proper linting configuration for your project"),Object(i.b)("h4",{id:"javascript"},"JavaScript"),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"eslint-config-yoshi")," - An eslint config for full-stack and client applications using react"),Object(i.b)("p",null,"Extend it from ",Object(i.b)("inlineCode",{parentName:"p"},"package.json"),":"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "eslintConfig": {\n    "extends": "yoshi"\n  }\n}\n')),Object(i.b)("h4",{id:"typescript"},"TypeScript"),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"tslint-config-yoshi")," - A tslint config for full-stack and client applications using react"),Object(i.b)("p",null,"In your ",Object(i.b)("inlineCode",{parentName:"p"},"tslint.json")," file:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "extends": "tslint-config-yoshi"\n}\n')),Object(i.b)("h2",{id:"\ud83e\udd1e-shorter-npm-installs"},"\ud83e\udd1e Shorter NPM Installs"),Object(i.b)("p",null,"Yoshi, in its current state, is a solution for all types of projects and technologies: client and server, component and node libraries, Babel and Typescript, Angular and React."),Object(i.b)("p",null,"This entails installing multiple dependencies that your specific project might not need, thus increasing your install size and CI build time. Therefore, we've decided to split some of Yoshi's dependencies to external packages which will let you tune the dependencies of your project according to your specific needs."),Object(i.b)("p",null,"We have created two such dependency packages:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"yoshi-angular-dependencies")," - for an ",Object(i.b)("inlineCode",{parentName:"li"},"angular")," application"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"yoshi-style-dependencies")," - install if you are developing client facing applications")),Object(i.b)("h3",{id:"protractor"},"Protractor"),Object(i.b)("p",null,"As part of this effort, we have also removed ",Object(i.b)("inlineCode",{parentName:"p"},"protractor")," from Yoshi's dependencies. It comes with the ",Object(i.b)("inlineCode",{parentName:"p"},"yoshi-angular-dependencies")," package but can be installed separately."),Object(i.b)("h3",{id:"karma"},"Karma"),Object(i.b)("p",null,"As ",Object(i.b)("inlineCode",{parentName:"p"},"PhantomJS")," is no longer supported, we have changed ",Object(i.b)("inlineCode",{parentName:"p"},"Karma"),"'s default browser to ",Object(i.b)("inlineCode",{parentName:"p"},"Chrome"),". See the ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/karma-runner/karma-chrome-launcher"}),"karma-chrome-launcher")," readme for more information. If you have used ",Object(i.b)("inlineCode",{parentName:"p"},"PhantomJS")," and ",Object(i.b)("s",null,"insist")," wish to continue using it you will need to install it as a separate package."),Object(i.b)("h2",{id:"-tree-shaking"},"\ud83c\udf32 Tree shaking"),Object(i.b)("p",null,"Tree shaking is a way to reduce the size of your bundle by excluding code that isn't actually used (",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://webpack.js.org/guides/tree-shaking"}),"learn more"),")."),Object(i.b)("p",null,"Tree shaking in Webpack relies on the static syntax of ECMAScript modules and will only work if you use ECMAScript modules (",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import"}),"learn more"),"). From version 3, Yoshi pre-configures its Babel and TypeScript loaders to support tree shaking."),Object(i.b)("p",null,"If you are writing a client-side library, you should follow ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/wix/yoshi/blob/master/docs/guides/export-es-modules.md"}),"these instructions")," to publish an ECMAScript modules version of your library."),Object(i.b)("h2",{id:"-code-splitting"},"\ud83d\udcdf Code splitting"),Object(i.b)("p",null,"Code splitting is one of the features provided by Webpack. It allows you to split your bundle into a few smaller bundles that can be loaded on demand (",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://webpack.js.org/guides/code-splitting"}),"learn more"),")."),Object(i.b)("p",null,"In version 3, Yoshi configures Webpack, your testing framework and related tools to support code splitting (hopefully) without any hassle."),Object(i.b)("h2",{id:"-easier-debugging-faster-development-production-optimizations"},"\ud83c\udf9b Easier debugging, Faster development, Production optimizations"),Object(i.b)("p",null,"From version 3, Yoshi will pre-configure Babel/TypeScript to include the minimal amount of polyfills, according to its environment."),Object(i.b)("p",null,"In a test environment, Yoshi will transpile for current Node version for fast testing and easier debugging. In development, transpile your code for modern browsers for fast builds. In production, Yoshi will optimize your bundle, compile for all possible targets from IE10, prepare for uglification and include polyfills."),Object(i.b)("p",null,"For React users, babel will ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/oliviertassinari/babel-plugin-transform-react-remove-prop-types"}),"remove propTypes from the production build")),Object(i.b)("p",null,"If you're using Babel, you'll need configure ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/wix/yoshi/blob/version_3.x/packages/babel-preset-yoshi/README.md"}),"babel-preset-yoshi"),"."),Object(i.b)("p",null,"In ",Object(i.b)("inlineCode",{parentName:"p"},"package.json"),":"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "babel": {\n    "presets": ["yoshi"]\n  }\n}\n')),Object(i.b)("p",null,"If you're using TypeScript, you don't need to change anything."),Object(i.b)("h2",{id:"\ud83e\udd39-jest-23"},"\ud83e\udd39 Jest 23"),Object(i.b)("p",null,"Yoshi jumps from Jest 20 to 23 \ud83c\udf89"),Object(i.b)("p",null,"We believe in Jest, in the future want to make it the default test runner for yoshi."),Object(i.b)("p",null,"Please refer to ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/facebook/jest/blob/master/CHANGELOG.md"}),"Jest's changelog")," and the release notes of ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"http://jestjs.io/blog/2017/12/18/jest-22"}),"Jest 22")," and ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"http://jestjs.io/blog/2018/05/29/jest-23-blazing-fast-delightful-testing"}),"Jest 23")," for new features and breaking changes."),Object(i.b)("h2",{id:"-url-resolve-loader"},"\ud83d\udd0d URL resolve loader"),Object(i.b)("p",null,"A webpack loader that resolves relative paths in ",Object(i.b)("inlineCode",{parentName:"p"},"url()")," statements based on the original source file (",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/bholloway/resolve-url-loader"}),"learn-more"),"). We think it's useful enough to be used as default. Just note it might be breaking for your project."),Object(i.b)("h2",{id:"-jasmine-3"},"\ud83d\udc8e Jasmine 3"),Object(i.b)("p",null,"Our oldest test runner has a new version \ud83c\udf89\nIf you use Jasmine, please read the ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/jasmine/jasmine/blob/master/release_notes/3.0.md#breaking-changes"}),"release notes")," (Jasmine now runs tests in random order)"),Object(i.b)("p",null,"Yours, Yoshi Team \u2764\ufe0f"),Object(i.b)("hr",null),Object(i.b)("h1",{id:"migration-guide"},"Migration guide"),Object(i.b)("p",null,"Before you start, commit all your current changes."),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Remove ",Object(i.b)("inlineCode",{parentName:"li"},"node_modules")," and any lock file:")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"rm -rf node_modules package-lock.json\n")),Object(i.b)("ol",{start:2},Object(i.b)("li",{parentName:"ol"},"Install Yoshi v3")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"npm i yoshi@3\n")),Object(i.b)("ol",{start:3},Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Add the relevant dependencies packages:"),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"React projects:")),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"npm i -D yoshi-style-dependencies\n")),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"React projects that use Protractor:")),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"npm i -D yoshi-style-dependencies protractor\n")),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"Angular projects:")),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"npm i -D yoshi-angular-dependencies yoshi-style-dependencies\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Install the rest of the dependencies:"))),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"npm i\n")),Object(i.b)("ol",{start:5},Object(i.b)("li",{parentName:"ol"},"For TypeScript projects:\nConfigure ",Object(i.b)("inlineCode",{parentName:"li"},"tslint")," in ",Object(i.b)("inlineCode",{parentName:"li"},"tslint.json"))),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "extends": "tslint-config-yoshi"\n}\n')),Object(i.b)("ol",{start:6},Object(i.b)("li",{parentName:"ol"},"For JavaScript projects:\nConfigure ",Object(i.b)("inlineCode",{parentName:"li"},"babel-preset-yoshi")," in ",Object(i.b)("inlineCode",{parentName:"li"},"package.json"))),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "babel": {\n    "presets": ["yoshi"]\n  }\n}\n')),Object(i.b)("p",null,"Configure ",Object(i.b)("inlineCode",{parentName:"p"},"eslint-config-yoshi")," in ",Object(i.b)("inlineCode",{parentName:"p"},"package.json")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "eslintConfig": {\n    "extends": "yoshi"\n  }\n}\n')),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Note:")," If you have an ",Object(i.b)("inlineCode",{parentName:"p"},".eslintrc")," file, please remove it and use ",Object(i.b)("inlineCode",{parentName:"p"},"eslintConfig")," in ",Object(i.b)("inlineCode",{parentName:"p"},"package.json")," instead."),Object(i.b)("ol",{start:7},Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Run ",Object(i.b)("inlineCode",{parentName:"p"},"npx yoshi lint --fix"),", the linter will try to fix all autofixable errors. Some errors might not be autofixable, and you\u2019ll have to fix them manually.")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Run ",Object(i.b)("inlineCode",{parentName:"p"},"build"),", ",Object(i.b)("inlineCode",{parentName:"p"},"test")," & ",Object(i.b)("inlineCode",{parentName:"p"},"start")," commands to verify that everything works properly.")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Commit and push your changes \ud83e\udd19"))),Object(i.b)("p",null,"For full changes list, head to our ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/wix/yoshi/blob/master/CHANGELOG.md#300-beta2-jun-25-2018"}),"changelog")," \ud83d\udd16"),Object(i.b)("p",null,"Hope the migration went ",Object(i.b)("s",null,"smooshly")," smoothly. Let us know if there are any problems in the ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://wix.slack.com/messages/yoshi"}),"#yoshi")," channel or open issue in ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/wix/yoshi"}),"Yoshi repo")))}b.isMDXComponent=!0},228:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=r.a.createContext({}),b=function(e){var t=r.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l({},t,{},e)),n},p=function(e){var t=b(e.components);return r.a.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=b(n),d=a,m=p["".concat(o,".").concat(d)]||p[d]||u[d]||i;return n?r.a.createElement(m,l({ref:t},c,{components:n})):r.a.createElement(m,l({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var c=2;c<i;c++)o[c]=n[c];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);